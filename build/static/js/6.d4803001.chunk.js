(this["webpackJsonpexpress-HelloWorld"]=this["webpackJsonpexpress-HelloWorld"]||[]).push([[6,13,14],{68:function(e,t,n){"use strict";n.r(t),n.d(t,"AddVisitSchema",(function(){return r})),n.d(t,"LoginSchema",(function(){return i})),n.d(t,"SignupSchema",(function(){return o}));var a=n(198),r=(a.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),a.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),a.string().email("Invalid email").required("Required"),a.object().shape({clinic:a.string().min(2,"Choose a clinic").required("Required"),providers:a.array().min(1,"Choose at least one provider").required("Required"),amountSpent:a.string().min(1,"Enter Amount Spent").required("Required"),reason:a.string().min(2,"Choose Reason For Visit").required("Required"),date:a.string().min(2,"Enter Date and Time").required("Required")})),i=a.object().shape({username:a.string().required(),password:a.string().required()}),o=a.object().shape({email:a.string().required(),password:a.string().required()})},70:function(e,t,n){"use strict";n.r(t),n.d(t,"r",(function(){return a})),n.d(t,"reasons",(function(){return r})),n.d(t,"clinics",(function(){return i})),n.d(t,"firstState",(function(){return o}));var a=function r(e){return e[Math.floor(Math.random()*e.length)]},r=["Educational Lunch","Resupply","In-Service","Issue Resolution/Tech Support","Educational Visit"],i=["Sunshine Clinic","Best providers Office","Big Alligator providers"],o=function firstState(){return{allMyClinics:[],submitError:null}}},81:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n(14),i=n(63),o=n(2),c=n(5),l=n(6),s=n(8),u=n(7),d=n(9),p=n(0),m=n.n(p),b=n(177),h=n(66),f=n(178),v=n(33),y=n(3),g=n(19),E=n(4),O=n(1),S=n.n(O),j=n(10),C=n.n(j),k=n(30),w=n(34),x=function CheckIcon(e){var t=e.fill,n=void 0===t?"currentColor":t,r=Object(a.a)(e,["fill"]);return m.a.createElement("svg",Object(E.a)({width:10,height:7,viewBox:"0 0 10 7"},r),m.a.createElement("path",{fill:n,fillRule:"evenodd",d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z"}))};x.displayName="CheckIcon",x.propTypes={fill:S.a.string};var M=function MinusIcon(e){var t=e.fill,n=void 0===t?"currentColor":t,r=Object(a.a)(e,["fill"]);return m.a.createElement("svg",Object(E.a)({width:16,height:16,viewBox:"0 0 16 16"},r),m.a.createElement("path",{fill:n,fillRule:"evenodd",d:"M11 7H5c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z"}))};M.displayName="MinusIcon",M.propTypes={fill:S.a.string};var R=function(e){function Checkbox(){var e,t;Object(c.a)(this,Checkbox);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=Object(s.a)(this,(e=Object(u.a)(Checkbox)).call.apply(e,[this].concat(a))),Object(o.a)(Object(g.a)(t),"setIndeterminate",(function(e){e&&(e.indeterminate=t.props.indeterminate)})),t}return Object(d.a)(Checkbox,e),Object(l.a)(Checkbox,[{key:"render",value:function render(){var e=this.props,t=e.theme,n=e.id,r=e.name,i=e.label,o=e.appearance,c=e.disabled,l=e.isInvalid,s=e.checked,u=e.onChange,d=e.value,p=e.indeterminate,b=Object(a.a)(e,["theme","id","name","label","appearance","disabled","isInvalid","checked","onChange","value","indeterminate"]),h=t.getCheckboxClassName(o);return m.a.createElement(C.a,Object(E.a)({is:"label",cursor:c?"not-allowed":"pointer",position:"relative",display:"flex",marginY:16},b),m.a.createElement(C.a,{className:h,is:"input",id:n,type:"checkbox",name:r,value:d,checked:s||p,onChange:u,disabled:c,"aria-invalid":l,innerRef:this.setIndeterminate}),m.a.createElement(C.a,{boxSizing:"border-box",borderRadius:3,display:"flex",alignItems:"center",justifyContent:"center",width:16,height:16},p?m.a.createElement(M,null):m.a.createElement(x,null)),i&&m.a.createElement(k.a,{marginLeft:8,size:300,color:c?"muted":"default"},i))}}]),Checkbox}(p.PureComponent);R.displayName="Checkbox",Object(o.a)(R,"propTypes",Object(y.a)({},j.spacing.propTypes,j.position.propTypes,j.layout.propTypes,j.dimensions.propTypes,{id:S.a.string,name:S.a.string,label:S.a.node,value:S.a.string,checked:S.a.bool,indeterminate:S.a.bool,onChange:S.a.func,disabled:S.a.bool,isInvalid:S.a.bool,appearance:S.a.string,theme:S.a.object.isRequired})),Object(o.a)(R,"defaultProps",{checked:!1,indeterminate:!1,onChange:function onChange(){},appearance:"default"});var A=Object(w.a)(R),T=n(26),q=n(70),I=n(27),P=n(228),V=n(68),D=n(38);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"default",(function(){return F}));var F=function(e){function AddVisit(){var e,t;Object(c.a)(this,AddVisit);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=Object(s.a)(this,(e=Object(u.a)(AddVisit)).call.apply(e,[this].concat(a)))).state={allMyClinics:[],submitError:null},t.submit=function(e,n){var a;n.resetForm;e.amountSpent=Number(Number(e.amountSpent).toFixed(2)),fetch(T.url+"visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_objectSpread({},e,{receiptID:t.state.receiptID||"",clinicName:(null===(a=t.state.allMyClinics.find((function(t){return t._id===e.clinic})))||void 0===a?void 0:a.name)||"name not found"}))}).then((function(e){return e.json()})).then((function(e){window.pglOptions.dev&&e.email.forEach(console.table),e&&e._id?(alert("Successfully Submitted"),t.props.history.push("pastvisits")):t.setState({submitError:e})}))},t.uploadReceipt=function(e){var n=new FormData;n.append("myFile",e),fetch(T.url+"receipt",{method:"POST",body:n}).then((function(e){if(e.ok)return e.json();throw t.setState({receiptUpload:"Upload failed, please contact tech support"}),new Error("Upload failed, please contact tech support")})).then((function(e){return t.setState({receiptID:e,receiptSubmitted:!0})}))},t}return Object(d.a)(AddVisit,e),Object(l.a)(AddVisit,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(T.getMyClinics)().then((function(t){return e.setState({allMyClinics:t})})),fetch(T.url+"getproviders").then((function(e){return e.json()})).then((function(t){e.setState({providersByClinic:t})}))}},{key:"render",value:function render(){var e=this,t=this.state,n=t.providersByClinic,a=t.allMyClinics,r=window.pglOptions,o=r.validate,c=r.dev,l=r.prefill;return m.a.createElement(P.d,{initialValues:l?{clinic:"5e025ebe112a290f5bf2cd26",date:"2020-11-30T12:59",providers:[],reason:"Educational Lunch",amountSpent:400,materials:[]}:{clinic:"",date:"",providers:[],reason:"0",amountSpent:"",materials:[]},validationSchema:o&&V.AddVisitSchema,onSubmit:this.submit},(function(t){var r=t.isSubmitting,l=t.values,s=t.handleReset,u=t.handleSubmit;return m.a.createElement(I.Wrapper,null,m.a.createElement("form",{onReset:s,onSubmit:u,noValidate:!0},m.a.createElement(B,{values:l}),m.a.createElement(P.a,{component:I.Err,name:"clinic"}),m.a.createElement(P.b,{name:"clinic",as:I.MySelectField,label:"Choose Clinic"},[{_id:0,name:"Choose Clinic"}].concat(Object(i.a)(a)).map((function(e){var t=e._id,n=e.name;return m.a.createElement("option",{key:t,value:t,children:n})}))),m.a.createElement(P.a,{component:I.Err,name:"providers"}),m.a.createElement(L,{providersByClinic:n,clinic:l.clinic}),m.a.createElement(I.MyTextInputField,{label:"Add Receipt",type:"file",capture:!0,width:250,marginBottom:32,onChange:function onChange(t){return Object(I.compress)(t,e.uploadReceipt)}}),e.state.receiptUpload,m.a.createElement(P.a,{component:I.Err,name:"date"}),m.a.createElement(P.b,{name:"date",label:"Date",type:"datetime-local",as:I.MyTextInputField}),m.a.createElement(P.a,{component:I.Err,name:"reason"}),m.a.createElement(P.b,{name:"reason",as:I.MySelectField,label:"Reason For Visit"},m.a.createElement("option",{value:"0",key:0},"Choose a Reason"),q.reasons.map((function(e){return m.a.createElement("option",{value:e,key:e},e)}))),m.a.createElement(N,null),m.a.createElement(P.a,{component:I.Err,name:"amountSpent"}),m.a.createElement(P.b,{inputMode:"numeric",name:"amountSpent",as:I.MyTextInputField,label:"Enter Amount Spent"}),m.a.createElement(b.a,null,"Additional Notes:",m.a.createElement(P.b,{name:"notes",as:I.MyTextarea})),m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("div",{style:{margin:"auto"}},c&&m.a.createElement("button",{type:"submit"},"check"),e.state.receiptSubmitted||!o?m.a.createElement(h.a,{type:"submit",disabled:r,children:"Submit",height:60}):"Please Attach A Receipt Before Submitting",r&&"Adding Visit",e.state.submitError&&e.state.submitError))))}))}}]),AddVisit}(m.a.Component),B=function See(e){var t=e.values;e.errors;return m.a.createElement(I.DevInfo,null,Object.entries(t).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return m.a.createElement("div",{key:n},n," value is ",a||"empty")})))},N=function SelectMaterials(){return m.a.createElement(f.a,{label:"Choose Materials"},m.a.createElement(P.a,{component:I.Err,name:"materials"}),m.a.createElement(v.a,{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},["1","2","3","4","5"].map((function(e){return m.a.createElement(P.b,{style:{flex:"1 0 33%"},key:e,label:"Material ".concat(e),as:A,type:"checkbox",name:"materials",value:e})}))))},L=function SelectProvider(e){var t=e.providersByClinic,n=e.clinic;Object(a.a)(e,["providersByClinic","clinic"]);if(!n)return"Please Select A Clinic";var r=t&&t[n];return r&&r.length?m.a.createElement(f.a,{label:"Providers Present At Meeting"},t[n].map((function(e){var t=e._id,n=e.name;return m.a.createElement(P.b,{key:t,label:n,as:A,type:"checkbox",name:"providers",value:t})}))):m.a.createElement(m.a.Fragment,null,"This Clinic Has No Providers, Please Add One"," ",m.a.createElement(D.b,{to:"/addProvider"},"Here"))}}}]);
//# sourceMappingURL=6.d4803001.chunk.js.map