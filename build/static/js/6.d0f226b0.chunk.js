(this["webpackJsonpexpress-HelloWorld"]=this["webpackJsonpexpress-HelloWorld"]||[]).push([[6,13,14],{67:function(e,t,n){"use strict";n.r(t),n.d(t,"AddVisitSchema",(function(){return a})),n.d(t,"LoginSchema",(function(){return i})),n.d(t,"SignupSchema",(function(){return o}));var r=n(197),a=(r.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),r.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),r.string().email("Invalid email").required("Required"),r.object().shape({clinic:r.string().min(2,"Choose a clinic").required("Required"),providers:r.array().min(1,"Choose at least one provider").required("Required"),amountSpent:r.string().min(1,"Enter Amount Spent").required("Required"),reason:r.string().min(2,"Choose Reason For Visit").required("Required"),date:r.string().min(2,"Enter Date and Time").required("Required")})),i=r.object().shape({username:r.string().required(),password:r.string().required()}),o=r.object().shape({email:r.string().required(),password:r.string().required()})},69:function(e,t,n){"use strict";n.r(t),n.d(t,"r",(function(){return r})),n.d(t,"reasons",(function(){return a})),n.d(t,"clinics",(function(){return i})),n.d(t,"firstState",(function(){return o}));var r=function r(e){return e[Math.floor(Math.random()*e.length)]},a=["Educational Lunch","Resupply","In-Service","Issue Resolution/Tech Support","Educational Visit"],i=["Sunshine Clinic","Best providers Office","Big Alligator providers"],o=function firstState(){return{allMyClinics:[],submitError:null}}},80:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(13),i=n(62),o=n(1),c=n(4),l=n(5),s=n(7),u=n(6),d=n(8),p=n(0),m=n.n(p),b=n(176),f=n(65),h=n(177),y=n(32),v=n(19),g=n(3),E=n(2),O=n.n(E),j=n(9),S=n.n(j),C=n(29),w=n(33);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=function CheckIcon(e){var t=e.fill,n=void 0===t?"currentColor":t,a=Object(r.a)(e,["fill"]);return m.a.createElement("svg",Object(g.a)({width:10,height:7,viewBox:"0 0 10 7"},a),m.a.createElement("path",{fill:n,fillRule:"evenodd",d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z"}))};k.displayName="CheckIcon",k.propTypes={fill:O.a.string};var R=function MinusIcon(e){var t=e.fill,n=void 0===t?"currentColor":t,a=Object(r.a)(e,["fill"]);return m.a.createElement("svg",Object(g.a)({width:16,height:16,viewBox:"0 0 16 16"},a),m.a.createElement("path",{fill:n,fillRule:"evenodd",d:"M11 7H5c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z"}))};R.displayName="MinusIcon",R.propTypes={fill:O.a.string};var x=function(e){function Checkbox(){var e,t;Object(c.a)(this,Checkbox);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=Object(s.a)(this,(e=Object(u.a)(Checkbox)).call.apply(e,[this].concat(r))),Object(o.a)(Object(v.a)(t),"handleInnerRef",(function(e){e&&(e.indeterminate=t.props.indeterminate),t.props.innerRef(e)})),t}return Object(d.a)(Checkbox,e),Object(l.a)(Checkbox,[{key:"render",value:function render(){var e=this.props,t=e.theme,n=e.id,a=e.name,i=e.label,o=e.appearance,c=e.disabled,l=e.isInvalid,s=e.checked,u=e.onChange,d=e.value,p=e.indeterminate,b=(e.innerRef,Object(r.a)(e,["theme","id","name","label","appearance","disabled","isInvalid","checked","onChange","value","indeterminate","innerRef"])),f=t.getCheckboxClassName(o);return m.a.createElement(S.a,Object(g.a)({is:"label",cursor:c?"not-allowed":"pointer",position:"relative",display:"flex",marginY:16},b),m.a.createElement(S.a,{className:f,is:"input",id:n,type:"checkbox",name:a,value:d,checked:s||p,onChange:u,disabled:c,"aria-invalid":l,innerRef:this.handleInnerRef}),m.a.createElement(S.a,{boxSizing:"border-box",borderRadius:3,display:"flex",flex:"none",alignItems:"center",justifyContent:"center",width:16,height:16},p?m.a.createElement(R,null):m.a.createElement(k,null)),i&&m.a.createElement(C.a,{marginLeft:8,size:300,color:c?"muted":"default"},i))}}]),Checkbox}(p.PureComponent);x.displayName="Checkbox",Object(o.a)(x,"propTypes",function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j.spacing.propTypes,{},j.position.propTypes,{},j.layout.propTypes,{},j.dimensions.propTypes,{id:O.a.string,name:O.a.string,label:O.a.node,value:O.a.string,checked:O.a.bool,indeterminate:O.a.bool,innerRef:O.a.func,onChange:O.a.func,disabled:O.a.bool,isInvalid:O.a.bool,appearance:O.a.string,theme:O.a.object.isRequired})),Object(o.a)(x,"defaultProps",{checked:!1,indeterminate:!1,innerRef:function innerRef(){},onChange:function onChange(){},appearance:"default"});var A=Object(w.a)(x),P=n(25),M=n(69),T=n(26),q=n(227),I=n(67),V=n(34);function AddVisit_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddVisit_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddVisit_ownKeys(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddVisit_ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"default",(function(){return D}));var D=function(e){function AddVisit(){var e,t;Object(c.a)(this,AddVisit);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=Object(s.a)(this,(e=Object(u.a)(AddVisit)).call.apply(e,[this].concat(r)))).state={allMyClinics:[],submitError:null},t.submit=function(e,n){var r;n.resetForm;e.amountSpent=Number(Number(e.amountSpent).toFixed(2)),fetch(P.url+"visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(AddVisit_objectSpread({},e,{receiptID:t.state.receiptID||"",clinicName:(null===(r=t.state.allMyClinics.find((function(t){return t._id===e.clinic})))||void 0===r?void 0:r.name)||"name not found"}))}).then((function(e){return e.json()})).then((function(e){window.pglOptions.dev&&e.email.forEach(console.table),e&&e._id?(alert("Successfully Submitted"),t.props.history.push("pastvisits")):t.setState({submitError:e})}))},t.uploadReceipt=function(e){var n=new FormData;n.append("myFile",e),fetch(P.url+"receipt",{method:"POST",body:n}).then((function(e){if(e.ok)return e.json();throw t.setState({receiptUpload:"Upload failed, please contact tech support"}),new Error("Upload failed, please contact tech support")})).then((function(e){return t.setState({receiptID:e,receiptSubmitted:!0})}))},t}return Object(d.a)(AddVisit,e),Object(l.a)(AddVisit,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(P.getMyClinics)().then((function(t){return e.setState({allMyClinics:t})})),fetch(P.url+"getproviders").then((function(e){return e.json()})).then((function(t){e.setState({providersByClinic:t})}))}},{key:"render",value:function render(){var e=this,t=this.state,n=t.providersByClinic,r=t.allMyClinics,a=window.pglOptions,o=a.validate,c=a.dev,l=a.prefill;return m.a.createElement(q.d,{initialValues:l?{clinic:"5e025ebe112a290f5bf2cd26",date:"2020-11-30T12:59",providers:[],reason:"Educational Lunch",amountSpent:400,materials:[]}:{clinic:"",date:"",providers:[],reason:"0",amountSpent:"",materials:[]},validationSchema:o&&I.AddVisitSchema,onSubmit:this.submit},(function(t){var a=t.isSubmitting,l=t.values,s=t.handleReset,u=t.handleSubmit;return m.a.createElement(T.Wrapper,null,m.a.createElement("form",{onReset:s,onSubmit:u,noValidate:!0},m.a.createElement(F,{values:l}),m.a.createElement(q.a,{component:T.Err,name:"clinic"}),m.a.createElement(q.b,{name:"clinic",as:T.MySelectField,label:"Choose Clinic"},[{_id:0,name:"Choose Clinic"}].concat(Object(i.a)(r)).map((function(e){var t=e._id,n=e.name;return m.a.createElement("option",{key:t,value:t,children:n})}))),m.a.createElement(q.a,{component:T.Err,name:"providers"}),m.a.createElement(N,{providersByClinic:n,clinic:l.clinic}),m.a.createElement(T.MyTextInputField,{label:"Add Receipt",type:"file",width:250,marginBottom:32,onChange:function onChange(t){return Object(T.compress)(t,e.uploadReceipt)}}),e.state.receiptUpload,m.a.createElement(q.a,{component:T.Err,name:"date"}),m.a.createElement(q.b,{name:"date",label:"Date",type:"datetime-local",as:T.MyTextInputField}),m.a.createElement(q.a,{component:T.Err,name:"reason"}),m.a.createElement(q.b,{name:"reason",as:T.MySelectField,label:"Reason For Visit"},m.a.createElement("option",{value:"0",key:0},"Choose a Reason"),M.reasons.map((function(e){return m.a.createElement("option",{value:e,key:e},e)}))),m.a.createElement(B,null),m.a.createElement(q.a,{component:T.Err,name:"amountSpent"}),m.a.createElement(q.b,{inputMode:"decimal",name:"amountSpent",as:T.MyTextInputField,label:"Enter Amount Spent"}),m.a.createElement(b.a,null,"Additional Notes:",m.a.createElement(q.b,{name:"notes",as:T.MyTextarea})),m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("div",{style:{margin:"auto"}},c&&m.a.createElement("button",{type:"submit"},"check"),e.state.receiptSubmitted||!o?m.a.createElement(f.a,{type:"submit",disabled:a,children:"Submit",height:60}):"Please Attach A Receipt Before Submitting",a&&"Adding Visit",e.state.submitError&&e.state.submitError))))}))}}]),AddVisit}(m.a.Component),F=function See(e){var t=e.values;e.errors;return m.a.createElement(T.DevInfo,null,Object.entries(t).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return m.a.createElement("div",{key:n},n," value is ",r||"empty")})))},B=function SelectMaterials(){return m.a.createElement(h.a,{label:"Choose Materials"},m.a.createElement(q.a,{component:T.Err,name:"materials"}),m.a.createElement(y.a,{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},["1","2","3","4","5"].map((function(e){return m.a.createElement(q.b,{style:{flex:"1 0 33%"},key:e,label:"Material ".concat(e),as:A,type:"checkbox",name:"materials",value:e})}))))},N=function SelectProvider(e){var t=e.providersByClinic,n=e.clinic;Object(r.a)(e,["providersByClinic","clinic"]);if(!n)return"Please Select A Clinic";var a=t&&t[n];return a&&a.length?m.a.createElement(h.a,{label:"Providers Present At Meeting"},t[n].map((function(e){var t=e._id,n=e.name;return m.a.createElement(q.b,{key:t,label:n,as:A,type:"checkbox",name:"providers",value:t})}))):m.a.createElement(m.a.Fragment,null,"This Clinic Has No Providers, Please Add One"," ",m.a.createElement(V.b,{to:"/addprovider"},"Here"))}}}]);
//# sourceMappingURL=6.d0f226b0.chunk.js.map