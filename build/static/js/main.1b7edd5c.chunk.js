(this["webpackJsonpexpress-HelloWorld"]=this["webpackJsonpexpress-HelloWorld"]||[]).push([[0],{108:function(e,t,n){},170:function(e,t,n){e.exports=n.p+"static/media/la_south.b57e2716.gif"},177:function(e,t,n){e.exports=n(463)},182:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(169),o=n.n(i),c=(n(182),n(6)),l=n(7),u=n(9),s=n(8),d=n(23),h=n(10),p=n(50),m=(n(108),n(170)),f=n.n(m);n(183).load();console.log("jack7","true");var v="/",b=function(){return fetch(v+"clinic",{method:"GET"}).then((function(e){return e.json()}))},O=n(41),y=(n(18),n(469)),j=(n(80),n(105)),g=n(468),E=n(470),S=n(172),C=function(){var e=this;return this.state.allMyClinics?r.a.createElement(g.a,{label:"Choose a Clinic",onChange:function(t){return e.addValue("clinic",t)}},this.state.allMyClinics.map((function(e){var t=e._id,n=e.name;return r.a.createElement("option",{key:t,value:t},n)}))):"loading Clinics"},k=function(e){var t=this,n=e.providers;return n?r.a.createElement(P,null,"Choose Providers Present",Object.values(n).map((function(e){var a=e._id,i=e.name,o=e.chosen;return r.a.createElement(S.Checkbox,{key:a,label:i,checked:o,onChange:function(){n[a].chosen=!o,t.setState({providerOptionsAtOneClinic:n})}})}))):"Loading Providers"},P=function(e){var t=e.children;return r.a.createElement(y.a,{display:"flex",padding:6,background:"tint2",borderRadius:3},r.a.createElement(y.a,{flex:1,alignItems:"center"},t))},M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).providerPicker=function(t){return r.a.createElement("div",null,r.a.createElement(j.a,{defaultValue:"all",onChange:function(t){var n=t.target.value;return e.setState({chosen:n})}},r.a.createElement("option",{value:"all"},"All"),Object.keys(e.state.byName).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))},e.state={},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(v+"visits").then((function(e){return e.json()})).then((function(t){e.setState({allVisits:t})}))}},{key:"render",value:function(){console.log(this.state);var e=this.state.allVisits;return r.a.createElement(P,null,e?Object.entries(e[0]).map((function(e){var t=Object(O.a)(e,2),n=(t[0],t[1]);return r.a.createElement("div",null,"for ",n.name," you've spent $",n.amount)})):"loading")}}]),t}(r.a.Component),w=n(66),T=n.n(w),V=n(106),A=n(471),D=["Educational Lunch","Resupply","In-Service","Issue Resolution/Tech Support","Educational Visit"],N=function(){return{provider:"",amountSpent:(45*Math.random()).toFixed(2),date:new Date,reason:(e=D,e[Math.floor(Math.random()*e.length)]),materials:"stuff",receipt:"coming soon"};var e},x=n(65),I=(n(315),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=Object(V.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.entries(e.state).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return console.log("in state",n,a)})),(n=["amountSpent","date","reason","materials","receipt","clinic"].reduce((function(t,n){return t[n]=e.state[n],t}),{})).providers=Object.keys(e.state.providerOptionsAtOneClinic),Object.entries(n).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return console.log("to submit",n,a)})),t.next=6,fetch(v+"visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("error posting")}));case 6:case"end":return t.stop()}}),t)}))),e.Date=function(){return console.log(70,e.state.date),r.a.createElement(E.a,{required:!0,label:"Date",value:e.state.date,type:"date",id:"start"})},e.AmountSpent=function(){return r.a.createElement(E.a,{label:"Amount Spent",required:!0,value:e.state.amountSpent,onChange:e.addValue.bind(Object(d.a)(e),"amountSpent")})},e.Reason=function(){return r.a.createElement(x.Select,{defaultValue:"all",onChange:function(t){var n=t.target.value;return e.setState({reason:n})}},D.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))},e.See=function(){return Object.entries(e.state).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];switch(n){case"date":a=JSON.stringify(a)}return r.a.createElement("div",{key:n},n," is ","string"===typeof a?a:a?"too much info":"not chosen")}))},e.state=N(),e.SelectClinic=C.bind(Object(d.a)(e)),e.SelectProvider=k.bind(Object(d.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){return e.setState({allMyClinics:t,clinic:t[0]})})),this.getAllProviders()}},{key:"getAllProviders",value:function(){var e=Object(V.a)(T.a.mark((function e(){var t,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+"getproviders",{method:"GET"}).then((function(e){return e.json()}));case 2:t=e.sent,this.setState({providersByClinic:t},(function(){var e=Object.keys(t),a=Math.floor(Math.random()*e.length);n.addValue("clinic",{target:{value:e[a]}})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addValue",value:function(e,t){var n={},a=t.target.value;if(console.log(e,a),n[e]=a,"clinic"===e){console.log(e,a);var r=this.state.providersByClinic[a]||[];n.providerOptionsAtOneClinic=r.reduce((function(e,t){return t.chosen=Math.random()>.5,e[t._id]=t,e}),{})}this.setState(n,this.submit)}},{key:"render",value:function(){var e=this.state.providerOptionsAtOneClinic;return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.SelectClinic,null),r.a.createElement(this.SelectProvider,{providers:e}),r.a.createElement(this.Date,null),r.a.createElement(this.Reason,null),r.a.createElement(this.AmountSpent,null),r.a.createElement(A.a,{onClick:this.submit,appearance:"primary"},"Submit"))}}]),t}(r.a.Component)),J=n(2),B=n(56),F=n.n(B);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(J.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.state);delete t.allMyClinics,fetch(v+"provider",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){}))},e.Input=function(t){var n=t.id,a=t.desc;return r.a.createElement(E.a,{required:!0,description:a,value:e.state[n],onChange:e.addValue.bind(Object(d.a)(e),n)})},e.SelectType=function(){return r.a.createElement(x.SelectField,{label:"Provider Type",defaultValue:"MD",onChange:function(t){return e.addValue("type",t)}},e.providerTypes.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))},e.state={name:F.a.first()+" "+F.a.last(),clinic:"",type:"MD"},e.providerTypes=["MD","PA","NP","MSN"],e.SelectClinic=C.bind(Object(d.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){var n=function(e){return Math.floor(Math.random()*e)};e.setState({type:e.providerTypes[n(4)],allMyClinics:t,clinic:t[n(t.length)]._id})}))}},{key:"addValue",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.SelectClinic,null),r.a.createElement(this.Input,{id:"name",desc:"Provider Name"}),r.a.createElement(this.SelectType,null),r.a.createElement("button",{onClick:this.submit},"Submit"))}}]),t}(r.a.Component),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=function(){console.log(17),fetch(v+"clinic",{method:"POST",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(23,e),e.json()})).then((function(e){console.log("add clinic",e)}))},e.Input=function(t){var n=t.id,a=t.desc;return r.a.createElement(E.a,{required:!0,description:a,value:e.state[n],onChange:e.addValue.bind(Object(d.a)(e),n)})},e.state={name:F.a.last()+" Clinic",address:"100 "+F.a.middle()+" St."},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.submit()}},{key:"addValue",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.Input,{id:"name",desc:"Clinic Name"}),r.a.createElement(this.Input,{id:"address",desc:"Clinic Address"}),r.a.createElement(p.Button,{height:"32",appearance:"primary",onClick:this.submit},"Submit"))}}]),t}(r.a.Component),q=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).Header=function(){var t={"Add Visit":I,"Past Visits":M,"Add Provider":R,"Add Clinic":_};return r.a.createElement("nav",null,Object.entries(t).map((function(t){var n=Object(O.a)(t,2),a=n[0],i=n[1];return r.a.createElement(p.Button,{key:a,height:"32",appearance:i===e.state.show?"primary":"minimal",onClick:function(){return e.setState({show:i})}},a)})))},e.state={show:_},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.Header,null),"function"===typeof this.state.show?r.a.createElement(this.state.show,null):r.a.createElement("div",null,"you broke authorized.js"))}}]),t}(r.a.Component),H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).submit=function(e){console.log(e,11),fetch(v+"login",{method:"POST",body:JSON.stringify({region:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e,"16 app"),e&&localStorage.setItem("region",e)}))},n.Choose=function(){return r.a.createElement("div",{className:"login"},["North Louisiana","North Mississippi","South Mississippi"].map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(p.Button,{onClick:n.submit.bind(Object(d.a)(n),e),appearance:"primary"},e))})),r.a.createElement("button",null,r.a.createElement("img",{alt:"South Louisiana",className:"south-la-button",src:f.a}),"South Louisiana,"))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.region.then((function(e){return e.json()})).then((function(t){t&&localStorage.setItem("region",t),e.setState({region:t})}))}},{key:"render",value:function(){return this.state&&this.state.region?r.a.createElement(q,null):r.a.createElement(this.Choose,null)}}]),t}(r.a.Component),G=fetch(v+"login",{credentials:"include"});o.a.render(r.a.createElement(H,{region:G}),document.getElementById("root"))}},[[177,1,2]]]);