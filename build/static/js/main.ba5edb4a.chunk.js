(this["webpackJsonpexpress-HelloWorld"]=this["webpackJsonpexpress-HelloWorld"]||[]).push([[0],{102:function(e,t,n){e.exports=n(255)},107:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(94),c=n.n(i),o=(n(107),n(6)),l=n(7),u=n(9),s=n(8),d=n(23),h=n(10),m=n(46),f=(n(70),n(95)),p=n.n(f);n(108).load();console.log("jack7","true");var b="/",v=function(){return fetch(b+"clinic",{method:"GET"}).then((function(e){return e.json()}))},O=n(29),j=(n(18),n(261)),y=(n(59),n(68)),g=n(38),E=n.n(g),S=n(47),C=n(260),k=n(262),w=n(263),P=n(97),M=function(){var e=this;return this.state.allMyClinics?r.a.createElement(C.a,{label:"Choose a Clinic",onChange:function(t){return e.addValue("clinic",t)}},this.state.allMyClinics.map((function(e){var t=e._id,n=e.name;return r.a.createElement("option",{key:t,value:t},n)}))):"loading Clinics"},A=function(e){var t=this,n=e.providers;return n?r.a.createElement(V,null,"Choose Providers Present",Object.values(n).map((function(e){var a=e._id,i=e.name,c=e.chosen;return r.a.createElement(P.Checkbox,{key:a,label:i,checked:c,onChange:function(){n[a].chosen=!c,t.setState({providerOptionsAtOneClinic:n})}})}))):"Loading Providers"},V=function(e){var t=e.children;return r.a.createElement(j.a,{display:"flex",padding:6,background:"tint2",borderRadius:3},r.a.createElement(j.a,{flex:1,alignItems:"center"},t))},T=function(){var e=this,t=function(){var t=Object(S.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),e.setState({submitted:!1,waiting:!0},Object(S.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submit();case 2:e.setState({submitted:!0});case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=this.state,a=n.submitted;return n.waiting&&!a?"Submitting Data":a?r.a.createElement("div",null,"'Succesfully Submitted'",r.a.createElement("button",{onClick:function(){return location.reload()}},"Add Another")):r.a.createElement(w.a,{onClick:t,appearance:"primary"},"Submit")},x=function(e){e.children;return null},D=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).providerPicker=function(t){return r.a.createElement("div",null,r.a.createElement(y.a,{defaultValue:"all",onChange:function(t){var n=t.target.value;return e.setState({chosen:n})}},r.a.createElement("option",{value:"all"},"All"),Object.keys(e.state.byName).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))},e.state={},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(b+"visits").then((function(e){return e.json()})).then((function(t){e.setState({allVisits:t})}))}},{key:"render",value:function(){console.log(this.state);var e=this.state.allVisits;return console.log(e),r.a.createElement(V,null,e?Object.entries(e[0]).map((function(e){var t=Object(O.a)(e,2),n=(t[0],t[1]);return r.a.createElement("div",null,"for ",n.name," you've spent $",n.amount)})):"loading")}}]),t}(r.a.Component),N=["Educational Lunch","Resupply","In-Service","Issue Resolution/Tech Support","Educational Visit"],I=function(){return{provider:"",amountSpent:(45*Math.random()).toFixed(2),reason:(e=N,e[Math.floor(Math.random()*e.length)]),materials:"stuff",receipt:"coming soon"};var e},B=n(55),J=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=Object(S.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.entries(e.state).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return console.log("in state",n,a)})),(n=["amountSpent","date","reason","materials","receipt","clinic"].reduce((function(t,n){return t[n]=e.state[n],t}),{})).providers=Object.entries(e.state.providerOptionsAtOneClinic).reduce((function(e,t){var n=Object(O.a)(t,2),a=n[0],r=n[1];return console.log(28,r),!0===r.chosen&&e.push(a),e}),[]),Object.entries(n).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return console.log("to submit",n,a)})),t.next=6,fetch(b+"visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("error posting")}));case 6:case"end":return t.stop()}}),t)}))),e.Date=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{required:!0,label:"Date",onChange:e.addValue.bind(Object(d.a)(e),"date"),type:"datetime-local",id:"start",step:"60"}))},e.AmountSpent=function(){return r.a.createElement(k.a,{label:"Amount Spent",required:!0,value:e.state.amountSpent,onChange:e.addValue.bind(Object(d.a)(e),"amountSpent")})},e.Reason=function(){return r.a.createElement(B.Select,{defaultValue:"all",onChange:function(t){var n=t.target.value;return e.setState({reason:n})}},N.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))},e.See=function(){return r.a.createElement(x,null,Object.entries(e.state).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];switch(n){case"date":a=JSON.stringify(a);case"providerOptionsAtOneClinic":a=JSON.stringify(a)}return r.a.createElement("div",{key:n},n," is ","string"===typeof a?a:a?"too much info":"not chosen")})))},e.state=I(),e.SelectClinic=M.bind(Object(d.a)(e)),e.SelectProvider=A.bind(Object(d.a)(e)),e.SubmitButton=T.bind(Object(d.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){return e.setState({allMyClinics:t,clinic:t[0]})})),this.getAllProviders()}},{key:"getAllProviders",value:function(){var e=Object(S.a)(E.a.mark((function e(){var t,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"getproviders",{method:"GET"}).then((function(e){return e.json()}));case 2:t=e.sent,this.setState({providersByClinic:t},(function(){var e=Object.keys(t),a=Math.floor(Math.random()*e.length);n.addValue("clinic",{target:{value:e[a]}})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addValue",value:function(e,t){var n={},a=t.target.value;if(console.log(e,a),n[e]=a,"clinic"===e){console.log(e,a);var r=this.state.providersByClinic[a]||[];n.providerOptionsAtOneClinic=r.reduce((function(e,t){return t.chosen=Math.random()>.5,e[t._id]=t,e}),{})}console.log("addvalue",e,a),this.setState(n,(function(){}))}},{key:"render",value:function(){var e=this.state.providerOptionsAtOneClinic;return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.See,null),r.a.createElement(this.SelectClinic,null),r.a.createElement(this.SelectProvider,{providers:e}),r.a.createElement(this.Date,null),r.a.createElement(this.Reason,null),r.a.createElement(this.AmountSpent,null),r.a.createElement(this.SubmitButton,null))}}]),t}(r.a.Component),F=n(2),L=n(48),R=n.n(L);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var q=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(F.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.state);delete t.allMyClinics,fetch(b+"provider",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){}))},e.Input=function(t){var n=t.id,a=t.desc;return r.a.createElement(k.a,{required:!0,description:a,value:e.state[n],onChange:e.addValue.bind(Object(d.a)(e),n)})},e.SelectType=function(){return r.a.createElement(B.SelectField,{label:"Provider Type",defaultValue:"MD",onChange:function(t){return e.addValue("type",t)}},e.providerTypes.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))},e.See=function(){return r.a.createElement(x,null,Object.entries(e.state).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return"allMyClinics"!==n&&r.a.createElement("div",{key:n},n," is ",a)})))},e.state={name:R.a.first()+" "+R.a.last(),clinic:"",type:"MD"},e.providerTypes=["MD","PA","NP","MSN"],e.SelectClinic=M.bind(Object(d.a)(e)),e.SubmitButton=T.bind(Object(d.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){var n=function(e){return Math.floor(Math.random()*e)};e.setState({type:e.providerTypes[n(4)],allMyClinics:t,clinic:t[n(t.length)]._id},(function(){}))}))}},{key:"addValue",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.See,null),r.a.createElement(this.SelectClinic,null),r.a.createElement(this.Input,{id:"name",desc:"Provider Name"}),r.a.createElement(this.SelectType,null),r.a.createElement(this.SubmitButton,null))}}]),t}(r.a.Component),H=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).submit=function(){console.log(17),fetch(b+"clinic",{method:"POST",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(23,e),e.json()})).then((function(e){console.log("add clinic",e)}))},e.Input=function(t){var n=t.id,a=t.desc;return r.a.createElement(k.a,{required:!0,description:a,value:e.state[n],onChange:e.addValue.bind(Object(d.a)(e),n)})},e.See=function(){return r.a.createElement(x,null,Object.entries(e.state).map((function(e){var t=Object(O.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n},n," is ",a)})))},e.state={name:R.a.last()+" Clinic",address:"100 "+R.a.middle()+" St."},e.SubmitButton=T.bind(Object(d.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0}},{key:"addValue",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.See,null),r.a.createElement(this.Input,{id:"name",desc:"Clinic Name"}),r.a.createElement(this.Input,{id:"address",desc:"Clinic Address"}),r.a.createElement(this.SubmitButton,null))}}]),t}(r.a.Component),G=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).Header=function(){var t={"Add Visit":J,"Past Visits":D,"Add Provider":q,"Add Clinic":H};return r.a.createElement("nav",null,Object.entries(t).map((function(t){var n=Object(O.a)(t,2),a=n[0],i=n[1];return r.a.createElement(m.Button,{key:a,height:"32",appearance:i===e.state.show?"primary":"minimal",onClick:function(){return e.setState({show:i})}},a)})))},e.state={show:J},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.Header,null),"function"===typeof this.state.show?r.a.createElement(j.a,{display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(j.a,{width:"90vw",border:"default"},r.a.createElement(this.state.show,null))):r.a.createElement("div",null,"you broke authorized.js"))}}]),t}(r.a.Component),W=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).submit=function(e){console.log(e,11),fetch(b+"login",{method:"POST",body:JSON.stringify({region:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e,"16 app"),e&&localStorage.setItem("region",e)}))},n.Choose=function(){return r.a.createElement("div",{className:"login"},["North Louisiana","North Mississippi","South Mississippi"].map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(m.Button,{onClick:n.submit.bind(Object(d.a)(n),e),appearance:"primary"},e))})),r.a.createElement("button",null,r.a.createElement("img",{alt:"South Louisiana",className:"south-la-button",src:p.a}),"South Louisiana,"))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.region.then((function(e){return e.json()})).then((function(t){t&&localStorage.setItem("region",t),e.setState({region:t})}))}},{key:"render",value:function(){return this.state&&this.state.region?r.a.createElement(G,null):r.a.createElement(this.Choose,null)}}]),t}(r.a.Component),z=fetch(b+"login",{credentials:"include"});c.a.render(r.a.createElement(W,{region:z}),document.getElementById("root"))},70:function(e,t,n){},95:function(e,t,n){e.exports=n.p+"static/media/la_south.b57e2716.gif"}},[[102,1,2]]]);